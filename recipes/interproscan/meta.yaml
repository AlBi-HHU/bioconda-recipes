{% set name = "interproscan" %}
{% set version_minor = "83.0" %}
{% set version_major = "5.48" %}
{% set sha256 = "a7b86e77df5882d90e2ce688dd7639f7f7f0b923fc2f55aea6a7a0208b5b4c8f" %}

package:
  name: "{{ name|lower }}"
  version: "{{ version_major }}_{{ version_minor }}"

source:
  url: https://github.com/ebi-pf-team/interproscan/archive/{{ version_major }}-{{ version_minor }}.tar.gz
  sha256: {{ sha256 }}

build:
  noarch: generic
  number: 0

requirements:
  build:
    - openjdk >=11
    - maven >=3
  run:
    - python >=3
    - perl >=5.08
    - openjdk >=11
    - cath-tools # for cath-resolve-hits used by CATH-Gene3D
    - pftools # for Pfscan/Pfsearch used by ProSite Profiles, ProSite Patterns and HAMAP
    - hmmer2 # used by SMART
    - hmmer >=3 # used by CATH-Gene3D, HAMAP, PANTHER, Pfam, PIRSF, SFLD, SUPERFAMILY and TIGRFAMs
    - emboss #  for getorf for nucleic acid sequence search
    - coils # for ncoils used by Coils
    - fingerprintscan # used by PRINTS
    - blast >=2.9 # for rpsblast/rpsbproc used by CDD
    - sfld # for sfld_preprocess/sfld_postprocess used by SFLD
    - easel # use by PIRSF

test:
  files:
    - test_proteins.fasta
    - test_nt_seqs.fasta
    - test_all_appl.fasta
  commands:
    - perl -version
    - python3 --version
    - java -version
    - interproscan.sh --version
    - interproscan.sh -i test_proteins.fasta -f tsv -dp -appl sfld, hamap,prints,smart,pfam,pirsf,tigrfam,prositeprofiles,prositepatterns,gene3d,superfamily
    - interproscan.sh -i test_proteins.fasta -f tsv -appl sfld, hamap,prints,smart,pfam,pirsf,tigrfam,prositeprofiles,prositepatterns,gene3d,superfamily
    - interproscan.sh -i test_nt_seqs.fasta -t n -f tsv -dp -appl sfld, hamap,prints,smart,pfam,pirsf,tigrfam,prositeprofiles,prositepatterns,gene3d,superfamily
    - interproscan.sh -i test_nt_seqs.fasta -t n -f tsv -appl sfld, hamap,prints,smart,pfam,pirsf,tigrfam,prositeprofiles,prositepatterns,gene3d,superfamily
    - interproscan.sh -i test_nt_seqs.fasta -t n -f tsv,json,xml -appl pfam, pirsf
    - interproscan.sh -i test_all_appl.fasta -f tsv -dp -exclappl cdd
    - interproscan.sh -i test_all_appl.fasta -f tsv -dp -appl cdd

about:
  home: https://github.com/ebi-pf-team/interproscan
  license: GPLv3
  license_family: Apache
  license_file: LICENSE
  summary: InterPro integrates together predictive information about proteins function from a number of partner resources
  dev_url: https://github.com/ebi-pf-team/interproscan
